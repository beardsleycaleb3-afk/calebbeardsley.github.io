<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Caleb Beardsley | oO0+ Symphony</title>
<meta name="viewport" content="width=device-width">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font:14px/1.4 'Courier New',monospace;background:#000;color:#0f0;overflow:hidden}
.console{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center,#000 0%,#0a0a1a 100%)}
.header{position:absolute;top:20px;left:50%;transform:translateX(-50%);text-align:center;text-shadow:0 0 20px #0f0}
h1{font-size:28px;letter-spacing:6px}
.preset-btn{position:absolute;top:90px;font-size:12px;padding:8px 16px;background:rgba(0,20,0,0.8);border:1px solid #0f0;color:#0f0;cursor:pointer;transition:all 0.3s}
.preset-btn:hover{box-shadow:0 0 20px #0f0;background:rgba(0,50,0,0.9)}
#demo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90vmin;height:90vmin;border:2px solid #0f0;box-shadow:0 0 100px rgba(0,255,0,0.3)}
.status{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:20px;font-size:11px}
.stat{background:rgba(0,0,0,0.7);padding:8px 12px;border:1px solid #0f0}
.footer{position:absolute;bottom:5px;left:50%;transform:translateX(-50%);color:#444;font-size:10px}
</style>
</head>
<body>
<div class="console">
  <div class="header">
    <h1>oO0+ SYMPHONY ENGINE</h1>
    <div>Particles = Musical Notes | Black Hole Singularity</div>
  </div>
  
  <button class="preset-btn" style="left:20px" onclick="loadPreset(0)">Beethoven 5th</button>
  <button class="preset-btn" style="left:140px" onclick="loadPreset(1)">Bach C Major</button>
  <button class="preset-btn" style="left:260px" onclick="loadPreset(2)">Moonlight Sonata</button>
  <button class="preset-btn" style="left:400px" onclick="loadPreset(3)">Toccata Fugue</button>
  <button class="preset-btn" style="left:540px" onclick="loadPreset(4)">Symphony 9</button>
  <button class="preset-btn" style="right:20px" onclick="loadPreset(5)">Random Gen</button>
  
  <canvas id="demo" width="900" height="900"></canvas>
  
  <div class="status">
    <div class="stat">Notes: <span id="notes">512</span></div>
    <div class="stat">Singularity: <span id="sink">87%</span></div>
    <div class="stat">Preset: <span id="preset">Beethoven</span></div>
  </div>
  
  <div class="footer">Â© Caleb Beardsley 2026 | Compression Engine Sonification</div>
</div>

<script>
// oO0+ Musical Black Hole - Particles = Symphony Notes
const canvas=document.getElementById('demo');
const ctx=canvas.getContext('2d');
const audioCtx=new AudioContext();
let t=0, particles=[], preset=0, sinkRate=0.1;

// Beethoven/Bach note sequences (frequency tables)
const presets=[
  [[220,246,277,293,329,349,392,440,493,523],0.3,1.8], // Beethoven 5th
  [[261,277,293,311,349,369,392,415,440,466],0.25,1.5], // Bach C Major
  [[130,146,155,174,185,196,207,220,233,247],0.4,2.2], // Moonlight
  [[123,138,155,164,185,196,207,220,233,261],0.35,1.9], // Toccata
  [[196,220,246,277,293,329,369,392,440,493],0.28,2.0], // Symphony 9
  [[110,123,138,146,164,185,207,220,246,277],0.2,1.2]  // Random
];

let currentNotes=presets[0][0], noteSpeed=presets[0][1], decay=presets[0][2];

class NoteParticle {
  constructor() {
    this.angle=Math.random()*Math.PI*2;
    this.radius=400+Math.random()*200;
    this.freq=currentNotes[Math.floor(Math.random()*currentNotes.length)];
    this.life=1;
    this.size=2;
  }
  
  update() {
    // Black hole attraction
    const pull=0.02+(1-this.life)*sinkRate;
    this.angle+=(Math.sin(t*0.5+this.freq*0.001)*0.02);
    this.radius-=pull;
    this.life-=0.008;
    this.size=Math.max(0.5,this.life*4);
    
    // Play note when birthing
    if(this.life>0.95) playNote(this.freq);
  }
  
  draw() {
    const x=canvas.width/2 + Math.cos(this.angle)*this.radius;
    const y=canvas.height/2 + Math.sin(this.angle)*this.radius;
    
    // Note color = frequency
    const hue=(this.freq*10)%360;
    ctx.save();
    ctx.translate(x,y);
    ctx.globalAlpha=this.life*0.8;
    ctx.shadowColor=`hsla(${hue},100%,60%,1)`;
    ctx.shadowBlur=25;
    
    // Musical particle glow
    const grad=ctx.createRadialGradient(0,0,0,0,0,this.size*10);
    grad.addColorStop(0,`hsla(${hue},100%,70%,${this.life})`);
    grad.addColorStop(1,'transparent');
    ctx.fillStyle=grad;
    ctx.beginPath();
    ctx.arc(0,0,this.size*10,0,Math.PI*2);
    ctx.fill();
    ctx.restore();
  }
}

// Pure synthesis - no samples
function playNote(freq) {
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value=freq;
  osc.type='sawtooth';
  gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime+decay);
  osc.start(audioCtx.currentTime);
  osc.stop(audioCtx.currentTime+decay);
}

function loadPreset(i) {
  preset=i;
  currentNotes=presets[i][0];
  noteSpeed=presets[i][1];
  decay=presets[i][2];
  document.getElementById('preset').textContent=['Beethoven','Bach','Moonlight','Toccata','Symphony','Random'][i];
  particles.forEach(p=>p.life=0); // Clear old notes
}

// Render symphony
function render() {
  t+=0.016;
  ctx.fillStyle='rgba(0,5,20,0.15)';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  
  // Black hole singularity
  const centerX=canvas.width/2, centerY=canvas.height/2;
  ctx.save();
  ctx.translate(centerX,centerY);
  ctx.shadowColor='#0f0';
  ctx.shadowBlur=50;
  
  // Event horizon glow
  const grad=ctx.createRadialGradient(0,0,0,0,0,100);
  grad.addColorStop(0,'rgba(0,255,0,0.9)');
  grad.addColorStop(0.7,'rgba(0,50,0,0.6)');
  grad.addColorStop(1,'transparent');
  ctx.fillStyle=grad;
  ctx.beginPath();
  ctx.arc(0,0,100,0,Math.PI*2);
  ctx.fill();
  ctx.restore();
  
  // Spawn musical particles
  if(particles.length<512 && Math.random()<0.3) {
    particles.push(new NoteParticle());
  }
  
  // Update & draw notes
  for(let i=particles.length-1;i>=0;i--) {
    particles[i].update();
    particles[i].draw();
    if(particles[i].radius<50 || particles[i].life<0) {
      particles.splice(i,1);
    }
  }
  
  // Update stats
  document.getElementById('notes').textContent=particles.length;
  document.getElementById('sink').textContent=(87+Math.sin(t)*5).toFixed(0)+'%';
  
  requestAnimationFrame(render);
}

// Init first preset
loadPreset(0);
render();
</script>
</body>
</html>
